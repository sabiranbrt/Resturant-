var gallery={window_width:0,window_height:0,is_menu:!1,is_menu_opened:!1,is_image_loaded:!1,is_window_scrollable:!1,map:{object:{},key:"",index:0},config:{set_selector:"div.js-gallery>div",set_svg_color:"#ffffff",set_background_opacity:.9,set_image_hover_transparency:!0,set_image_hover_opacity:.8},construct:function(t){this.init(t),this.setGallery();let e=[];t.hasOwnProperty("group")&&Array.isArray(t.group)&&(e=t.group),this.is_menu=e.length>1;let i=[],n=[];for(let t of e)this.map.object[t]={},i.push(`a[rel=${t}]`),n.push(`li[rel=${t}]`);$("body").on("click",i.join(", ")+", "+n.join(", "),function(t){t.preventDefault();let e="li"===$(this)[0].tagName.toLowerCase();e&&$("div#background, div#foreground").remove();let i,n,o=$(this).attr("rel"),s=`a[rel=${o}]`;if(gallery.map.key=o,gallery.map.index=e?0:$(this).parent().parent().find(s).index($(this)),!Object.keys(gallery.map.object[o]).length){let t=0;$(s).each(function(){i="string"==typeof $(this).attr("href")&&$(this).attr("href").length?$(this).attr("href"):null,n="string"==typeof $(this).attr("title")&&$(this).attr("title").length?$(this).attr("title"):null,gallery.map.object[o][t]={href:i,title:n},++t})}gallery.setWindowSize()}),$("body").on("click","div#background>div.menu",function(){"none"===$("ul","div#foreground").css("display")?(gallery.is_menu_active=!0,$("ul","div#foreground").fadeIn(600)):(gallery.is_menu_active=!1,$("ul","div#foreground").fadeOut(200))}),$("body").on("click","div#background>div.close",function(){$("div#background, div#foreground").remove(),gallery.is_window_scrollable&&$("body").css("overflowY","scroll")}),this.config.set_image_hover_transparency&&$(`${this.config.set_selector}>a>img`).length&&$(`${this.config.set_selector}>a>img`).hover(function(){$(this).fadeTo(200,gallery.config.set_image_hover_opacity)},function(){$(this).fadeTo(200,1)})},init:function(t){t.hasOwnProperty("set_selector")&&"string"==typeof t.set_selector&&new RegExp("^[A-Z]{1,3}[A-Z-_>.]+$","gim").test(t.set_selector)&&$(t.set_selector).length&&(this.config.set_selector=t.set_selector),t.hasOwnProperty("set_svg_color")&&"string"==typeof t.set_svg_color&&new RegExp("^#([A-F0-9]{3}|[A-F0-9]{6})$","gim").test(t.set_svg_color)&&(this.config.set_svg_color=t.set_svg_color),t.hasOwnProperty("set_background_opacity")&&"number"==typeof t.set_background_opacity&&t.set_background_opacity>=0&&t.set_background_opacity<=1&&(this.config.set_background_opacity=t.set_background_opacity),t.hasOwnProperty("set_image_hover_transparency")&&"boolean"==typeof t.set_image_hover_transparency&&(this.config.set_image_hover_transparency=t.set_image_hover_transparency),t.hasOwnProperty("set_image_hover_opacity")&&"number"==typeof t.set_image_hover_opacity&&t.set_image_hover_opacity>=0&&t.set_image_hover_opacity<=1&&(this.config.set_image_hover_opacity=t.set_image_hover_opacity)},setGallery:function(){$(window).on("load",function(){gallery.is_window_scrollable=$(document).height()>$(window).height()});let t=$(this.config.set_selector).parent().width(),e=5,i=0;switch($(this.config.set_selector).removeClass("eol"),!0){case t<=767:e=2;break;case t>=768&&t<=1023:e=3;break;case t>=1024&&t<=1199:e=4}$(this.config.set_selector).each(function(){++i%e==0&&$(this).addClass("eol")})},setWindowSize:function(){this.is_window_scrollable&&$("body").css("overflowY","hidden"),this.window_width=$(window).width(),this.window_height=$(window).height(),this.setBackground(),this.setForeground()},getDimension:function(t,e){return[this.window_width>t?(this.window_width-t)/2:0,this.window_height>e?(this.window_height-e)/2:0]},setBackground:function(){$("body").append('<div id="background">\n\t\t<div class="content top"></div>\n\t\t<div class="menu"><img></div>\n\t\t<div class="close"><img></div>\n\t\t<div class="loading"><img></div>\n\t\t<div class="content bottom"></div>\n\t\t</div>'),$("div.menu>img").attr("src",this.setSVG(this.svg._menu_)),$("div.close>img").attr("src",this.setSVG(this.svg._close_)),$("div.loading>img").attr("src",this.setSVG(this.svg._loading_)),this.is_menu&&$("div.menu").css("display","block"),$("div#background").css("opacity",this.config.set_background_opacity);let t=this.getDimension(50,50);$("div.loading","div#background").css({top:t[1],left:t[0]})},setForeground:function(){this.is_image_loaded=!1;let t="";if(this.is_menu)for(let e in this.map.object)t+=`<li rel="${e}">${e}</li>`;$("body").append('<div id="foreground">\n\t\t<div class="image"></div>\n\t\t<ul></ul>\n\t\t</div>'),$("div#foreground>ul").html(t);let e=Object.keys(this.map.object[this.map.key]).length,i=this.map.index+1;$("div.image","div#foreground").append(`<img src="${this.map.object[this.map.key][this.map.index].href}" onload="gallery.getImage();">`),$("div.content.top","div#background").text(this.map.object[this.map.key][this.map.index].title),$("div.content.bottom","div#background").text(`${i} / ${e}`),1!==i&&e!==i&&(this.setPreviousLink(),this.setNextLink()),1===i&&1!==e&&this.setNextLink(),i===e&&1!==e&&this.setPreviousLink()},getImage:function(){let t=new Image;t.src=$("div.image>img","div#foreground").attr("src");let e=!1,i=t.width,n=t.height;n>this.window_height-100&&(e=!0,n=this.window_height-98,i=(t.width/t.height*n).toFixed(0)),i>this.window_width-60&&(e=!0,i=this.window_width-62,n=(t.height/t.width*i).toFixed(0)),e&&($("div.image>img","div#foreground").attr("width",i),$("div.image>img","div#foreground").attr("height",n));let o=this.getDimension(i,n);$("div.loading","div#background").animate({width:i,height:n,top:o[1],left:o[0]},200),$("div#foreground").css({width:i,height:n,top:o[1],left:o[0]}).fadeIn(600);let s=(n-$("div#foreground>ul").height())/2,r=(i-$("div#foreground>ul").width())/2;$("div#foreground>ul").css({top:s,left:r}),this.is_menu_active=!1,setTimeout(function(){gallery.is_image_loaded=!0},200)},setPreviousLink:function(){$("div.previous","div#background").length||($("div#background").prepend('<div class="previous"><img></div>'),$("div.previous>img","div#background").attr("src",this.setSVG(this.svg._previous_))),$("div.previous","div#background").on("click",function(){gallery.is_image_loaded&&($("div.previous","div#background").remove(),$("div#foreground").remove(),--gallery.map.index,gallery.setForeground())})},setNextLink:function(){$("div.next","div#background").length||($("div#background").append('<div class="next"><img></div>'),$("div.next>img","div#background").attr("src",this.setSVG(this.svg._next_))),$("div.next","div#background").on("click",function(){gallery.is_image_loaded&&($("div.next","div#background").remove(),$("div#foreground").remove(),++gallery.map.index,gallery.setForeground())})},setSVG:function(t){let e=$.parseHTML(t.trim());$(e).attr("xmlns","http://www.w3.org/2000/svg").children().each(function(){$(this).attr({stroke:gallery.config.set_svg_color})});let i=new Blob([$(e)[0].outerHTML],{type:"image/svg+xml"});return URL.createObjectURL(i)},setOrientationChange:void $(window).on("resize",function(){gallery.setGallery(),$("div.loading").length&&($("div#background, div#foreground").remove(),gallery.setWindowSize())}),keydown:void $(document).on("keydown",function(t){switch(t.which){case 27:gallery.is_menu_active?$("div.menu","div#background").trigger("click"):$("div.close","div#background").trigger("click");break;case 37:$("div.previous","div#background").trigger("click");break;case 39:$("div.next","div#background").trigger("click");break;case 13:return!1}}),svg:{_menu_:'<svg width="100" height="100">\n\t\t<line x1="10" y1="25" x2="90" y2="25" stroke="#000000" stroke-width="6"></line>\n\t\t<line x1="10" y1="50" x2="90" y2="50" stroke="#000000" stroke-width="6"></line>\n\t\t<line x1="10" y1="75" x2="90" y2="75" stroke="#000000" stroke-width="6"></line>\n\t\t</svg>',_close_:'<svg width="100" height="100">\n\t\t<line x1="10" y1="10" x2="90" y2="90" stroke="#000000" stroke-width="6"></line>\n\t\t<line x1="10" y1="90" x2="90" y2="10" stroke="#000000" stroke-width="6"></line>\n\t\t</svg>',_loading_:'<svg width="100" height="100">\n\t\t<line x1="0" y1="25" x2="0" y2="25" stroke="#000000" stroke-width="6">\n\t\t<animate attributeName="x1" begin="0s" dur="1s" from="50" to="10" repeatCount="indefinite"></animate>\n\t\t<animate attributeName="x2" begin="0s" dur="1s" from="50" to="90" repeatCount="indefinite"></animate>\n\t\t</line>\n\t\t<line x1="0" y1="50" x2="0" y2="50" stroke="#000000" stroke-width="6">\n\t\t<animate attributeName="x1" begin="0.33s" dur="1s" from="50" to="10" repeatCount="indefinite"></animate>\n\t\t<animate attributeName="x2" begin="0.33s" dur="1s" from="50" to="90" repeatCount="indefinite"></animate>\n\t\t</line>\n\t\t<line x1="0" y1="75" x2="0" y2="75" stroke="#000000" stroke-width="6">\n\t\t<animate attributeName="x1" begin="0.66s" dur="1s" from="50" to="10" repeatCount="indefinite"></animate>\n\t\t<animate attributeName="x2" begin="0.66s" dur="1s" from="50" to="90" repeatCount="indefinite"></animate>\n\t\t</line>\n\t\t</svg>',_next_:'<svg width="60" height="100">\n\t\t<line x1="10" y1="10" x2="50" y2="52" stroke="#000000" stroke-width="6"></line>\n\t\t<line x1="10" y1="90" x2="50" y2="48" stroke="#000000" stroke-width="6"></line>\n\t\t</svg>',_previous_:'<svg width="60" height="100">\n\t\t<line x1="50" y1="10" x2="10" y2="52" stroke="#000000" stroke-width="6"></line>\n\t\t<line x1="50" y1="90" x2="10" y2="48" stroke="#000000" stroke-width="6"></line>\n\t\t</svg>'}};